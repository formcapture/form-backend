# Form-Backend Documentation

This is the documentation for the form-backend.

- [Configuration Documentation (formConfig)](./types/formConfig.FormConfig.html)
- [API Documentation](./api.md)
- [Changelog](../../CHANGELOG.md)

## Miscellaneous

- The primary key of relations should be autogenerated by the database. Otherwise,
  users will have to provide the values for the primary keys manually
  since the form-backend cannot create those.
- For successful deletions, configure the table in a way that deletions
  do not violate foreign key constraints. This might happen in cases, where
  another table holds a foreign key to the table displayed in the form.
- Geodata is expected to be in the same coordinate reference system as the
  integrating masterportal application in order to enable geometry editing in
  masterportal.
- When editing geometries: Please ensure that the correct geometry type is used.
  For example, 3D geometries (PointZ, MultipolygonZ) cannot be saved in 2D geometry columns.
- PostgREST caches information about the database schema. If the schema changes
  (e.g. when changing table structures), the PostgREST cache must be invalidated.
  This can be done by restarting the PostgREST service or by using one of the approaches
  described on https://docs.postgrest.org/en/v12/references/schema_cache.html.
- PostgREST creates a transaction for each request, respectively. Since join tables cannot
  be updated within a single request, multiple transactions will be created. If one transaction
  fails, there will be no data cleanup and thereby artifacts might be created.
- When using data uploads, the target table can not be shared in multiple forms, but
  only be used in a single form.
- When working with many-to-many relationships, each table has to be handled in a separate database
  transaction. This might lead to data inconsistency, when crashing before handling all data.
- Columns that contain files MUST NOT have a `not null` constraint on their columns. This is due to
  file names requiring the item id, which will only exist after adding an item to the database.
- Geometry selection: If an input field is defined in which a geometry is to be transferred from a layer
  (format: `geometrySelection`), this layer must be configured and visible in the portal that embeds the form.
  Otherwise, a respective error message is displayed.
